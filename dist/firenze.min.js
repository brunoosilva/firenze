this["firenze"]=function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:false};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.loaded=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.p="";return __webpack_require__(0)}([function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _Database=__webpack_require__(1);var _Database2=_interopRequireDefault(_Database);var _Adapter=__webpack_require__(11);var _Adapter2=_interopRequireDefault(_Adapter);var _Collection=__webpack_require__(4);var _Collection2=_interopRequireDefault(_Collection);var _Model=__webpack_require__(10);var _Model2=_interopRequireDefault(_Model);var _Behavior=__webpack_require__(12);var _Behavior2=_interopRequireDefault(_Behavior);var _Promise=__webpack_require__(8);var _Promise2=_interopRequireDefault(_Promise);var _commonCollectionFactory=__webpack_require__(3);var _commonCollectionFactory2=_interopRequireDefault(_commonCollectionFactory);var _commonModelFactory=__webpack_require__(13);var _commonModelFactory2=_interopRequireDefault(_commonModelFactory);var _commonBehaviorFactory=__webpack_require__(14);var _commonBehaviorFactory2=_interopRequireDefault(_commonBehaviorFactory);exports["default"]={Database:_Database2["default"],Adapter:_Adapter2["default"],Collection:_Collection2["default"],Model:_Model2["default"],Behavior:_Behavior2["default"],Promise:_Promise2["default"],createCollectionClass:(0,_commonCollectionFactory2["default"])(),createModelClass:(0,_commonModelFactory2["default"])(),createBehaviorClass:(0,_commonBehaviorFactory2["default"])()};module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var _lodash=__webpack_require__(2);var _lodash2=_interopRequireDefault(_lodash);var _commonCollectionFactory=__webpack_require__(3);var _commonCollectionFactory2=_interopRequireDefault(_commonCollectionFactory);var _Promise=__webpack_require__(8);var _Promise2=_interopRequireDefault(_Promise);var Database=function(){function Database(){var options=arguments[0]===undefined?{}:arguments[0];_classCallCheck(this,Database);this.defaultOptions={adapter:null,host:null,user:null,database:null,password:null,prefix:null};this.options=_lodash2["default"].merge(this.defaultOptions,options);var AdapterClass=this.options.adapter;this.adapter=new AdapterClass(_lodash2["default"].omit(this.options,"adapter"));this.createCollectionClass=this.Collection=(0,_commonCollectionFactory2["default"])(this)}_createClass(Database,[{key:"getAdapter",value:function getAdapter(){return this.adapter}},{key:"getConnection",value:function getConnection(){return this.getAdapter().getConnection()}},{key:"close",value:function close(){var _this=this;return new _Promise2["default"](function(resolve){return _this.getAdapter().closeConnection().then(function(){return resolve()})})}}]);return Database}();exports["default"]=Database;module.exports=exports["default"]},function(module,exports){(function(){module.exports=this["_"]})()},function(module,exports,__webpack_require__){"use strict";var _get=function get(_x3,_x4,_x5){var _again=true;_function:while(_again){var object=_x3,property=_x4,receiver=_x5;desc=parent=getter=undefined;_again=false;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{_x3=parent;_x4=property;_x5=receiver;_again=true;continue _function}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)subClass.__proto__=superClass}var _lodash=__webpack_require__(2);var _lodash2=_interopRequireDefault(_lodash);var _Collection2=__webpack_require__(4);var _Collection3=_interopRequireDefault(_Collection2);module.exports=function(){var db=arguments[0]===undefined?null:arguments[0];return function(extend){var GeneratedCollection=function(_Collection){function GeneratedCollection(){var _extend=arguments[0]===undefined?{}:arguments[0];_classCallCheck(this,GeneratedCollection);_get(Object.getPrototypeOf(GeneratedCollection.prototype),"constructor",this).call(this,extend);if(!this.getDatabase()&&db){this.setDatabase(db)}_lodash2["default"].merge(this,_extend)}_inherits(GeneratedCollection,_Collection);return GeneratedCollection}(_Collection3["default"]);return GeneratedCollection}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _defineProperty(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var _lodash=__webpack_require__(2);var _lodash2=_interopRequireDefault(_lodash);var _async=__webpack_require__(6);var _async2=_interopRequireDefault(_async);var _validator=__webpack_require__(7);var _validator2=_interopRequireDefault(_validator);var _getParams=__webpack_require__(5);var _getParams2=_interopRequireDefault(_getParams);var _Promise=__webpack_require__(8);var _Promise2=_interopRequireDefault(_Promise);var _Model=__webpack_require__(10);var _Model2=_interopRequireDefault(_Model);var Collection=function(){function Collection(){var extend=arguments[0]===undefined?{}:arguments[0];_classCallCheck(this,Collection);this.modelClass=_Model2["default"];this.table=null;this.schema={};this.primaryKey="id";this.displayField=null;this.validationRules={};this.behaviors=[];this.loadedBehaviors=[];this.finders={all:"findAll",first:"findFirst",count:"findCount",list:"findList"};_lodash2["default"].merge(this,extend);if(!this.alias){this.alias=this.table}this.loadBehaviors();this.callBehavedMethod(this,"collectionInitialize")}_createClass(Collection,[{key:"model",value:function model(){var attributes=arguments[0]===undefined?{}:arguments[0];var extend=arguments[1]===undefined?{}:arguments[1];_lodash2["default"].merge(extend,{collection:this});return new this.modelClass(attributes,extend)}},{key:"getDatabase",value:function getDatabase(){return this.db}},{key:"getAdapter",value:function getAdapter(){return this.getDatabase().getAdapter()}},{key:"setDatabase",value:function setDatabase(db){this.db=db}},{key:"query",value:function query(){var options=arguments[0]===undefined?{}:arguments[0];return this.getAdapter().query(this,options)}},{key:"find",value:function find(){var type=arguments[0]===undefined?null:arguments[0];var options=arguments[1]===undefined?{}:arguments[1];if(!type||!this.finders[type]||!_lodash2["default"].isFunction(this[this.finders[type]])){throw new Error("Invalid find type")}return this[this.finders[type]](options)}},{key:"findAll",value:function findAll(){var _this=this;var options=arguments[0]===undefined?{}:arguments[0];var q=this.query(options);return new _Promise2["default"](function(resolve,reject){return _this.getAdapter().read(q).then(function(results){var models=[];_lodash2["default"].each(results,function(v){models.push(_this.model(v))});return resolve(models)})["catch"](reject)})}},{key:"findFirst",value:function findFirst(){var _this2=this;var options=arguments[0]===undefined?{}:arguments[0];var q=this.query(_lodash2["default"].merge(options,{limit:1}));return new _Promise2["default"](function(resolve,reject){return _this2.getAdapter().read(q).then(function(results){if(results.length===0){return resolve(null)}return resolve(_this2.model(results[0]))})["catch"](reject)})}},{key:"findCount",value:function findCount(){var _this3=this;var options=arguments[0]===undefined?{}:arguments[0];var q=this.query(_lodash2["default"].merge(options,{count:true}));return new _Promise2["default"](function(resolve,reject){return _this3.getAdapter().read(q).then(function(results){if(results.length===0){return resolve(null)}var firstKey=_lodash2["default"].first(_lodash2["default"].keys(results[0]));var count=results[0][firstKey];return resolve(count)})["catch"](reject)})}},{key:"findList",value:function findList(){var _this4=this;var options=arguments[0]===undefined?{}:arguments[0];if(!_lodash2["default"].isArray(options.fields)){options.fields=[this.primaryKey,this.displayField]}var q=this.query(options);return new _Promise2["default"](function(resolve,reject){return q.then(function(results){var list={};_lodash2["default"].each(results,function(v){var listK=v[_this4.primaryKey];var listV=v[_this4.displayField];list[listK]=listV});return resolve(list)})["catch"](reject)})}},{key:"findBy",value:function findBy(field,value){var options=arguments[2]===undefined?{}:arguments[2];return this.find("first",_lodash2["default"].merge({conditions:_defineProperty({},field,value)},options))}},{key:"findById",value:function findById(value){var options=arguments[1]===undefined?{}:arguments[1];return this.findBy(this.primaryKey,value,options)}},{key:"findByKey",value:function findByKey(value){var options=arguments[1]===undefined?{}:arguments[1];return this.findById(value,options)}},{key:"validate",value:function validate(model){var _this5=this;var options=arguments[1]===undefined?{}:arguments[1];var callbacks=_lodash2["default"].isUndefined(options.callbacks)||options.callbacks?true:false;return new _Promise2["default"](function(resolve,reject){return _async2["default"].waterfall([function(cb){if(!callbacks){return cb(null,true)}return _this5.callBehavedMethod(model,"beforeValidate").then(function(proceed){return cb(null,proceed)})["catch"](function(error){return cb(error)})},function(proceed,cb){return _this5._validate(model).then(function(res){if(res===true){return cb(null,true)}return cb(res)})["catch"](function(error){return cb(error)})},function(res,cb){if(!callbacks){return cb(null,res)}return _this5.callBehavedMethod(model,"afterValidate").then(function(){return cb(null,res)})["catch"](function(error){return cb(error)})}],function(err,result){if(err){if(_lodash2["default"].isObject(err)){return resolve(err)}return reject(err)}return resolve(result)})})}},{key:"_validate",value:function _validate(model){var _this6=this;var fields=[];_lodash2["default"].each(model.toObject(),function(v,field){if(!_lodash2["default"].isObject(v)){fields.push(field)}});_lodash2["default"].each(this.schema,function(schema,field){if(_lodash2["default"].isUndefined(schema.validate)){return}if(_lodash2["default"].isObject(schema.validate)&&schema.validate.required){fields.push(field);return}if(!_lodash2["default"].isArray(schema.validate)){return}_lodash2["default"].each(schema.validate,function(ruleObj){if(ruleObj.required){fields.push(field)}})});fields=_lodash2["default"].uniq(fields);var list={};return new _Promise2["default"](function(resolve,reject){_async2["default"].mapSeries(fields,function(field,cb){_this6.validateField(model,field).then(function(validated){if(validated!==true){list[field]=validated}cb()})["catch"](function(error){cb(error)})},function(err){if(err){return reject(err)}if(_lodash2["default"].isEmpty(list)){return resolve(true)}return resolve(list)})})}},{key:"validateField",value:function validateField(model,field){var _this7=this;var value=arguments[2]===undefined?null:arguments[2];if(!value){value=model.get(field)}var fieldSchema=this.schema[field];if(!_lodash2["default"].isObject(fieldSchema)||!fieldSchema.validate){return new _Promise2["default"].resolve(true)}var validate=fieldSchema.validate;if(!_lodash2["default"].isArray(validate)){validate=[validate]}return new _Promise2["default"](function(resolve){_async2["default"].eachSeries(validate,function(ruleObj,cb){var rule=ruleObj.rule;var ruleName=undefined;var ruleOptions=[];var message=ruleObj.message;var validatorFunc=undefined;var validatorOptions=undefined;if(_lodash2["default"].isString(rule)){ruleName=rule}else if(_lodash2["default"].isArray(rule)){ruleName=_lodash2["default"].first(rule);ruleOptions=_lodash2["default"].rest(rule)}if(_lodash2["default"].isFunction(rule)){validatorFunc=rule;validatorOptions=[field,value]}else if(ruleName&&_lodash2["default"].isFunction(_this7.validationRules[ruleName])){validatorFunc=_this7.validationRules[ruleName];validatorOptions=[field,value]}else if(_lodash2["default"].isFunction(_validator2["default"][ruleName])){validatorFunc=_validator2["default"][ruleName];validatorOptions=[value].concat(ruleOptions)}else{return cb(message)}var params=(0,_getParams2["default"])(validatorFunc);if(_lodash2["default"].last(params)==="done"){validatorOptions.push(function(passed){if(!passed){return cb(message)}cb()})}else{var passed=validatorFunc.apply(model,validatorOptions);if(!passed){return cb(message)}cb()}},function(err){if(err){return resolve(err)}return resolve(true)})})}},{key:"save",value:function save(model){var _this8=this;var options=arguments[1]===undefined?{}:arguments[1];var callbacks=_lodash2["default"].isUndefined(options.callbacks)||options.callbacks?true:false;return new _Promise2["default"](function(resolve,reject){return _async2["default"].waterfall([function(cb){if(!callbacks){return cb(null,true)}return _this8.callBehavedMethod(model,"beforeSave").then(function(proceed){if(proceed===true){return cb(null,proceed)}return cb(proceed)})},function(proceed,cb){if(!_lodash2["default"].isUndefined(options.validate)&&options.validate===false){return _this8._save(model,options).then(function(model){return cb(null,model)})["catch"](function(error){return cb(error)})}return _this8.validate(model).then(function(validated){if(validated===true){return _this8._save(model,options).then(function(model){return cb(null,model)})["catch"](function(error){return cb(error)})}return cb({validationErrors:validated})})},function(result,cb){if(!callbacks){return cb(null,model)}return _this8.callBehavedMethod(model,"afterSave").then(function(){return cb(null,model)})}],function(err,result){if(err){return reject(err)}return resolve(result)})})}},{key:"_save",value:function _save(model){var _this9=this;var options=arguments[1]===undefined?{}:arguments[1];var obj=model.toObject();return new _Promise2["default"](function(resolve,reject){var promise=null;var q=null;if(model.isNew()){q=_this9.query({alias:false});promise=_this9.getAdapter().create(q,obj)}else{obj=_lodash2["default"].omit(obj,model.primaryKey);if(_lodash2["default"].isArray(options.fields)){obj=_lodash2["default"].pick(obj,options.fields)}q=_this9.query({alias:false,conditions:_defineProperty({},_this9.primaryKey,model.getId())});promise=_this9.getAdapter().update(q,obj)}promise.then(function(ids){var id=null;if(_lodash2["default"].isArray(ids)&&ids.length===0||!ids){return resolve(id)}else if(_lodash2["default"].isArray(ids)){id=ids[0]}else{id=ids}return _this9.model({id:id}).fetch().then(function(m){resolve(m)})["catch"](function(error){reject(error)})})["catch"](reject)})}},{key:"delete",value:function _delete(model){var _this10=this;var options=arguments[1]===undefined?{}:arguments[1];var callbacks=_lodash2["default"].isUndefined(options.callbacks)||options.callbacks?true:false;return new _Promise2["default"](function(resolve,reject){return _async2["default"].waterfall([function(cb){if(!callbacks){return cb(null,true)}return _this10.callBehavedMethod(model,"beforeDelete").then(function(proceed){return cb(null,proceed)})["catch"](function(error){return cb(error)})},function(proceed,cb){return _this10._delete(model,_this10).then(function(res){return cb(null,res)})["catch"](function(error){return cb(error)})},function(result,cb){return _this10.callBehavedMethod(model,"afterDelete").then(function(){return cb(null,result)})["catch"](function(error){return cb(error)})}],function(err,result){if(err){return reject(err)}return resolve(result)})})}},{key:"_delete",value:function _delete(model){var _this11=this;return new _Promise2["default"](function(resolve,reject){if(model.isNew()){var error=new Error("Cannot delete a model without ID");return reject(error)}var q=_this11.query({alias:false,conditions:_defineProperty({},_this11.primaryKey,model.getId())});return _this11.getAdapter()["delete"](q).then(resolve)["catch"](reject)})}},{key:"loadBehaviors",value:function loadBehaviors(){var _this12=this;this.behaviors.forEach(function(behaviorItem){var behaviorClass=behaviorItem;var behaviorOptions={};if(_lodash2["default"].isObject(behaviorItem)&&_lodash2["default"].isObject(behaviorItem.options)){behaviorClass=behaviorItem["class"];behaviorOptions=behaviorItem.options}var behavior=new behaviorClass({collection:_this12,options:behaviorOptions});_this12.loadedBehaviors.push(behavior)})}},{key:"callBehavedMethod",value:function callBehavedMethod(context,methodName){var _this13=this;if(methodName.indexOf("after")===-1&&methodName.indexOf("before")===-1){this.loadedBehaviors.forEach(function(behavior){behavior[methodName](context)});return true}return new _Promise2["default"](function(resolve,reject){return _async2["default"].eachSeries(_this13.loadedBehaviors,function(behavior,callback){behavior[methodName](context).then(function(res){return callback(null,res)})["catch"](function(error){return callback(error)})},function(error){if(error){return reject(error)}return _this13[methodName](context).then(function(res){return resolve(res)})["catch"](function(error){return reject(error)})})})}},{key:"modelInitialize",value:function modelInitialize(model){return true}},{key:"beforeSave",value:function beforeSave(model){return new _Promise2["default"].resolve(true)}},{key:"afterSave",value:function afterSave(model){return new _Promise2["default"].resolve(true)}},{key:"beforeValidate",value:function beforeValidate(model){return new _Promise2["default"].resolve(true)}},{key:"afterValidate",value:function afterValidate(model){return new _Promise2["default"].resolve(true)}},{key:"beforeDelete",value:function beforeDelete(model){return new _Promise2["default"].resolve(true)}},{key:"afterDelete",value:function afterDelete(model){return new _Promise2["default"].resolve(true)}}]);return Collection}();exports["default"]=Collection;module.exports=exports["default"]},function(module,exports){var GetParams=function(func){"use strict";if(typeof func!=="function"){return[]}var patternComments=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm;var patternArguments=/([^\s,]+)/g;var funcString=func.toString().replace(patternComments,"");var result=funcString.slice(funcString.indexOf("(")+1,funcString.indexOf(")")).match(patternArguments);if(result===null){return[]}return result};if(typeof module!=="undefined"&&typeof module.exports!=="undefined"){module.exports=GetParams}if(typeof window!=="undefined"){window.GetParams=GetParams}},function(module,exports){(function(){module.exports=this["async"]})()},function(module,exports){(function(){module.exports=this["validator"]})()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _bluebird=__webpack_require__(9);var _bluebird2=_interopRequireDefault(_bluebird);exports["default"]=_bluebird2["default"];module.exports=exports["default"]},function(module,exports){(function(){module.exports=this["P"]})()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _defineProperty(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var _lodash=__webpack_require__(2);var _lodash2=_interopRequireDefault(_lodash);var _Promise=__webpack_require__(8);var _Promise2=_interopRequireDefault(_Promise);var Model=function(){function Model(){var attributes=arguments[0]===undefined?{}:arguments[0];var extend=arguments[1]===undefined?{}:arguments[1];_classCallCheck(this,Model);this.attributes=attributes?attributes:{};this.id=null;_lodash2["default"].merge(this,extend);var id=this.get(this.collection.primaryKey);if(id){this.id=id}this.collection.callBehavedMethod(this,"modelInitialize")}_createClass(Model,[{key:"get",value:function get(field){var obj=this.toObject();return _lodash2["default"].get(obj,field)}},{key:"set",value:function set(field,value){if(_lodash2["default"].isObject(field)){return _lodash2["default"].merge(this.attributes,field)}return _lodash2["default"].set(this.attributes,field,value)}},{key:"toObject",value:function toObject(){return this.attributes}},{key:"toJSON",value:function toJSON(){return this.toObject()}},{key:"fetch",value:function fetch(){var _this=this;var options=arguments[0]===undefined?{}:arguments[0];var id=this.getId();if(!id){throw new Error("No ID found")}_lodash2["default"].merge(options,{conditions:_defineProperty({},this.collection.alias+"."+this.collection.primaryKey,id)});return new _Promise2["default"](function(resolve,reject){return _this.collection.find("first",options).then(function(model){resolve(model)})["catch"](reject)})}},{key:"getId",value:function getId(){var id=this.id||this.get(this.collection.primaryKey);if(!_lodash2["default"].isUndefined(id)){return id}return null}},{key:"isNew",value:function isNew(){return this.getId()?false:true}},{key:"save",value:function save(){var options=arguments[0]===undefined?{}:arguments[0];return this.collection.save(this,options)}},{key:"saveField",value:function saveField(field,value){this.set(field,value);return this.save({fields:[field]})}},{key:"clear",value:function clear(){this.id=null;this.attributes={}}},{key:"delete",value:function _delete(){var options=arguments[0]===undefined?{}:arguments[0];return this.collection["delete"](this,options)}},{key:"validate",value:function validate(){var options=arguments[0]===undefined?{}:arguments[0];return this.collection.validate(this,options)}},{key:"validateField",value:function validateField(field){var value=arguments[1]===undefined?null:arguments[1];return this.collection.validateField(this,field,value)}}]);return Model}();exports["default"]=Model;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var _async=__webpack_require__(6);var _async2=_interopRequireDefault(_async);var _Promise=__webpack_require__(8);var _Promise2=_interopRequireDefault(_Promise);var Adapter=function(){function Adapter(){var options=arguments[0]===undefined?{}:arguments[0];_classCallCheck(this,Adapter)}_createClass(Adapter,[{key:"getConnection",value:function getConnection(){return null}},{key:"closeConnection",value:function closeConnection(){return new _Promise2["default"](function(resolve){return resolve()})}},{key:"query",value:function query(){var options=arguments[0]===undefined?{}:arguments[0];return new _Promise2["default"](function(resolve){return resolve()})}},{key:"create",value:function create(q,obj){return new _Promise2["default"](function(resolve){return resolve()})}},{key:"read",value:function read(q){return new _Promise2["default"](function(resolve){return resolve()})}},{key:"update",value:function update(q,obj){return new _Promise2["default"](function(resolve){return resolve()})}},{key:"delete",value:function _delete(q){return new _Promise2["default"](function(resolve){return resolve()})}},{key:"dropTable",value:function dropTable(collection){return new _Promise2["default"](function(resolve){return resolve()})}},{key:"createTable",value:function createTable(collection){return new _Promise2["default"](function(resolve){return resolve()})}},{key:"populateTable",value:function populateTable(collection,rows){return new _Promise2["default"](function(resolve){return resolve()})}},{key:"loadFixture",value:function loadFixture(collection,rows){var _this=this;return new _Promise2["default"](function(resolve,reject){_async2["default"].series([function(callback){_this.dropTable(collection).then(function(response){callback(null,response)})["catch"](function(error){callback(error)})},function(callback){_this.createTable(collection).then(function(response){callback(null,response)})["catch"](function(error){callback(error)})},function(callback){_this.populateTable(collection,rows).then(function(response){callback(null,response)})["catch"](function(error){callback(error)})}],function(err,results){if(err){return reject(err)}return resolve(results)})})}},{key:"loadAllFixtures",value:function loadAllFixtures(arr){var _this2=this;return new _Promise2["default"](function(resolve,reject){_async2["default"].map(arr,function(fixture,callback){_this2.loadFixture(fixture.collection,fixture.rows).then(function(results){callback(null,results)})["catch"](function(error){callback(error)})},function(err,results){if(err){return reject(err)}return resolve(results)})})}}]);return Adapter}();exports["default"]=Adapter;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var _lodash=__webpack_require__(2);var _lodash2=_interopRequireDefault(_lodash);var _Promise=__webpack_require__(8);var _Promise2=_interopRequireDefault(_Promise);var Behavior=function(){function Behavior(){var extend=arguments[0]===undefined?{}:arguments[0];_classCallCheck(this,Behavior);this.collection=null;this.options={};_lodash2["default"].merge(this,extend)}_createClass(Behavior,[{key:"collectionInitialize",value:function collectionInitialize(model){}},{key:"modelInitialize",value:function modelInitialize(model){}},{key:"beforeSave",value:function beforeSave(model){return new _Promise2["default"](function(resolve){return resolve()})}},{key:"afterSave",value:function afterSave(model){return new _Promise2["default"](function(resolve){return resolve()})}},{key:"beforeValidate",value:function beforeValidate(model){return new _Promise2["default"](function(resolve){return resolve()})}},{key:"afterValidate",value:function afterValidate(model){return new _Promise2["default"](function(resolve){return resolve()})}},{key:"beforeDelete",value:function beforeDelete(model){return new _Promise2["default"](function(resolve){return resolve()})}},{key:"afterDelete",value:function afterDelete(model){return new _Promise2["default"](function(resolve){return resolve()})}}]);return Behavior}();exports["default"]=Behavior;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";var _get=function get(_x3,_x4,_x5){var _again=true;_function:while(_again){var object=_x3,property=_x4,receiver=_x5;desc=parent=getter=undefined;_again=false;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{_x3=parent;_x4=property;_x5=receiver;_again=true;continue _function}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)subClass.__proto__=superClass}var _lodash=__webpack_require__(2);var _lodash2=_interopRequireDefault(_lodash);var _Model2=__webpack_require__(10);var _Model3=_interopRequireDefault(_Model2);
module.exports=function(){return function(extend){var GeneratedModel=function(_Model){function GeneratedModel(){var attributes=arguments[0]===undefined?{}:arguments[0];var _extend=arguments[1]===undefined?{}:arguments[1];_classCallCheck(this,GeneratedModel);_get(Object.getPrototypeOf(GeneratedModel.prototype),"constructor",this).call(this,attributes,_extend);_lodash2["default"].merge(this,extend)}_inherits(GeneratedModel,_Model);return GeneratedModel}(_Model3["default"]);return GeneratedModel}}},function(module,exports,__webpack_require__){"use strict";var _get=function get(_x2,_x3,_x4){var _again=true;_function:while(_again){var object=_x2,property=_x3,receiver=_x4;desc=parent=getter=undefined;_again=false;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{_x2=parent;_x3=property;_x4=receiver;_again=true;continue _function}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)subClass.__proto__=superClass}var _lodash=__webpack_require__(2);var _lodash2=_interopRequireDefault(_lodash);var _Behavior2=__webpack_require__(12);var _Behavior3=_interopRequireDefault(_Behavior2);module.exports=function(){return function(extend){var GeneratedBehavior=function(_Behavior){function GeneratedBehavior(){var _extend=arguments[0]===undefined?{}:arguments[0];_classCallCheck(this,GeneratedBehavior);_get(Object.getPrototypeOf(GeneratedBehavior.prototype),"constructor",this).call(this,_extend);_lodash2["default"].merge(this,extend)}_inherits(GeneratedBehavior,_Behavior);return GeneratedBehavior}(_Behavior3["default"]);return GeneratedBehavior}}}]);